<!-- {{myMails$ | async | json}} -->

<ng-container class="d-flex justify-content-center p-2 container" *ngIf="blurClass==true">

    <div class="col-md-12 updateBox container d-flex"  style="    margin-top: 7%;    margin-left: 2%;

    ">
      <div class="card card-container" style="width: 50rem;" id="cardupdateBox">
        <div id="cardUpdateHolderdiv" class="d-flex">

          <div id="card-header">
            <h5 class="card-header">Send E-mail</h5>
            <button type="button" class="btn btn-link fa-lg" (click)="blurClass=false"><span class="bi bi-x" style="position: absolute;
                top: 0%;
                font-size: 319%;
                left: 93%;"></span></button>

          </div>
         

        </div>
        <form name="form" (ngSubmit)="f.form.valid && sendMail()" #f="ngForm" novalidate>
          <div class="form-group">
            <label for="recieverEmail">Reciever :</label> <input type="recieverEmail" class="form-control" name="recieverEmail"
              [(ngModel)]="form.recieverEmail" #recieverEmail="ngModel" />

          </div>
          <div class="form-group">
            <label for="object">Object :</label> <input type="text" class="form-control" name="object"
              [(ngModel)]="form.object" #object="ngModel" />

          </div>
          <div class="form-group">
            <label for="content">Content :</label> <input type="text" class="form-control" name="content"
              [(ngModel)]="form.content" #content="ngModel" />

          </div>
          <div class="form-group">
            <button class="btn btn-primary btn-block">send e-mail </button>
          </div>
          
        </form>
      </div>
    </div>
  </ng-container>



















  <div class="container" style="margin-top: 3%;"   *ngIf="blurClass==false">
    <div class="content-wrapper ">
        <!-- Content Place Here -->
        <div class="email-app card-margin">
            <div class="email-toolbars-wrapper">
                <div class="toolbar-header">
                    <button type="button" class="btn btn-lg btn-block btn-compose-mail" (click)="blurClass=true">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        Compose Mail
                    </button>
                </div>
                <div class="toolbar-body">
                    <div class="toolbar-title">Folders</div>
                    <ul class="toolbar-menu">
                        <li class="active">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mail">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                                <polyline points="22,6 12,13 2,6"></polyline>
                            </svg>
                            <a href="#">Inbox</a>
                            <span class="badge badge-sb-base">8</span>
                        </li>
                        <!-- <li>
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                            <a href="#">Drafts</a>
                        </li>
                        <li>
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-send">
                                <line x1="22" y1="2" x2="11" y2="13"></line>
                                <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                            </svg>
                            <a href="#">Sent</a>
                        </li>
                        <li>
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="24"
                                height="24"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="feather feather-alert-circle"
                            >
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="8" x2="12" y2="12"></line>
                                <line x1="12" y1="16" x2="12" y2="16"></line>
                            </svg>
                            <a href="#">Spam</a>
                        </li>
                        <li>
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash-2">
                                <polyline points="3 6 5 6 21 6"></polyline>
                                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                <line x1="10" y1="11" x2="10" y2="17"></line>
                                <line x1="14" y1="11" x2="14" y2="17"></line>
                            </svg>
                            <a href="#">Trash</a>
                        </li>
                        <li>
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-star">
                                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                            </svg>
                            <a href="#">Starred</a>
                        </li> -->
                    </ul>
                    
                </div>
            </div>
            <div class="email-list-wrapper">
                <div class="email-list-header">
                    <div class="dropdown">
                        <button class="btn btn-sm btn-flash-border-base shadow-none dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Recent
                        </button>
                        <!-- <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                            <li class="dropdown-item"><a class="dropdown-link" href="#">Focused</a></li>
                            <li class="dropdown-item"><a class="dropdown-link" href="#">Others</a></li>
                        </ul> -->
                    </div>
                </div>
                <div id="email-app-body" class="email-list-scroll-container ps ps--active-y">
                    <ul class="email-list">

                        <ng-container *ngIf="( myMails$ | async ) as appState">

        
                        <ng-container *ngFor="let mail of appState.response; let i = index">
                            <li class="email-list-item" style="cursor: pointer;" (click)="showmail(mail)">
                                <div class="recipient">
                                    <img [src]="decodeImage(mail.sendingClient.image)"alt="Profile Picture" />
                                    <a href="#" class="recipient-name">{{mail.sendingClient.firstName}}</a>
                                </div>
                                <a href="#" class="email-subject">{{mail.object}}<i class="unread">&nbsp;</i></a>
                                <!-- <div class="email-footer">
                                    <div class="email-action">
                                        <a href="#" class="important">
                                            <svg
                                                xmlns="http://www.w3.org/2000/svg"
                                                width="24"
                                                height="24"
                                                viewBox="0 0 24 24"
                                                fill="none"
                                                stroke="currentColor"
                                                stroke-width="2"
                                                stroke-linecap="round"
                                                stroke-linejoin="round"
                                                class="feather feather-bookmark fill"
                                            >
                                                <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
                                            </svg>
                                        </a>
                                        <a href="#" class="starred">
                                            <svg
                                                xmlns="http://www.w3.org/2000/svg"
                                                width="24"
                                                height="24"
                                                viewBox="0 0 24 24"
                                                fill="none"
                                                stroke="currentColor"
                                                stroke-width="2"
                                                stroke-linecap="round"
                                                stroke-linejoin="round"
                                                class="feather feather-star"
                                            >
                                                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                                            </svg>
                                        </a>
                                        <a href="#" class="attachment">
                                            <svg
                                                xmlns="http://www.w3.org/2000/svg"
                                                width="24"
                                                height="24"
                                                viewBox="0 0 24 24"
                                                fill="none"
                                                stroke="currentColor"
                                                stroke-width="2"
                                                stroke-linecap="round"
                                                stroke-linejoin="round"
                                                class="feather feather-paperclip"
                                            >
                                                <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path>
                                            </svg>
                                        </a>
                                    </div>
                                    <span class="email-time">11:50 AM</span>
                                </div> -->
                            </li>
                        </ng-container>
                        
                        </ng-container>




                      
                    </ul>
                    <div class="ps__rail-x" style="left: 0px; bottom: 0px;"><div class="ps__thumb-x" tabindex="0" style="left: 0px; width: 0px;"></div></div>
                    <div class="ps__rail-y" style="top: 0px; height: 911px; right: 0px;"><div class="ps__thumb-y" tabindex="0" style="top: 0px; height: 772px;"></div></div>
                </div>
            </div>
            <ng-container *ngIf="showSelected==true">
                <div class="email-desc-wrapper" >
                    <div class="email-header">
                        <div class="email-date">{{selectedMail.sendingDate}}</div>
                    <div class="email-subject">{{selectedMail.subject}}</div>
                        <p class="recipient"><span>From:</span> {{selectedMail.sendingClient.firstName}} {{selectedMail.sendingClient.lastName}}  &lt;{{selectedMail.sendingClient.email}}&gt;</p>
                    </div>
                    <div class="email-body">
                        <p>
                            {{selectedMail.content}}
                        </p>
                    </div> 
                    <!-- <div class="email-attachment">
                        <div class="file-info">
                            <div class="file-size">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-paperclip">
                                    <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path>
                                </svg>
                                <span>Attachment (90 MB)</span>
                            </div>
                            <button class="btn btn-sm btn-soft-base">View All</button>
                            <button class="btn btn-sm btn-soft-success">Download All</button>
                        </div>
                        <ul class="attachment-list">
                            <li class="attachment-list-item"><img src="https://bootdey.com/img/Content/avatar/avatar1.png" alt="Showcase" title="Showcase" /></li>
                            <li class="attachment-list-item"><img src="https://bootdey.com/img/Content/avatar/avatar2.png" alt="Showcase" title="Showcase" /></li>
                            <li class="attachment-list-item"><img src="https://bootdey.com/img/Content/avatar/avatar3.png" alt="Showcase" title="Showcase" /></li>
                            <li class="attachment-list-item"><img src="https://bootdey.com/img/Content/avatar/avatar4.png" alt="Showcase" title="Showcase" /></li>
                            <li class="attachment-list-item"><span class="text-base">30+</span></li>
                        </ul>
                    </div> -->
                    <!-- <div class="email-action">
                        <button class="btn btn-base">Reply <i class="fa fa-reply"></i></button>
                        <button class="btn btn-info"><i class="fa fa-share"></i> Forward</button>
                    </div> -->
                 </div> 
            </ng-container>
          
        </div>
    </div>
    </div>